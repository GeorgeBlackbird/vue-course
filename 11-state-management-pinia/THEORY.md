# –¢–µ–º–∞ 11: üóÉÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: Pinia
> <p align=center> üìë –¢–µ–æ—Ä–∏—è </p>

–ü—Ä–∏–≤–µ—Ç! –ü–æ –º–µ—Ä–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã —Å—Ç—Ä–æ–∏–ª–∏ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç—ã –º–æ–≥ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–º–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å–µ —Å–ª–æ–∂–Ω–µ–µ. –£ –Ω–∞—Å –µ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã (`cartItems`) –≤ `App.vue`, –∞ –¥–æ–±–∞–≤–ª—è–µ–º –º—ã –≤ –Ω–µ–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `BookCard`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `HomePage.vue`. 

–ß—Ç–æ–±—ã —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å **"–ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å"** –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –≠—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ.

<br>

## –ü—Ä–æ–±–ª–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

–ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å—Ç–µ—Ç, –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
* **"–ü—Ä–æ–∫–∏–¥—ã–≤–∞–Ω–∏–µ" props (Prop Drilling):** –ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫ –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É –¥–æ—á–µ—Ä–Ω–µ–º—É, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç—Ç–∏ props —á–µ—Ä–µ–∑ –≤—Å–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –∏–º –Ω–µ –Ω—É–∂–Ω—ã.
* **"–í—Å–ø–ª—ã—Ç–∏–µ" —Å–æ–±—ã—Ç–∏–π (Event Bubbling Hell):** –ß—Ç–æ–±—ã –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–æ–±—â–∏–ª —á—Ç–æ-—Ç–æ —Å–∞–º–æ–º—É –≤–µ—Ä—Ö–Ω–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –Ω—É–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ø–æ—á–∫—É —Å–æ–±—ã—Ç–∏–π (`$emit`), –≥–¥–µ –∫–∞–∂–¥—ã–π —Ä–æ–¥–∏—Ç–µ–ª—å –ª–æ–≤–∏—Ç —Å–æ–±—ã—Ç–∏–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–µ –¥–ª—è —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è.
* **–ù–µ—è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑–º–µ–Ω—è–µ—Ç –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É.

–≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**. –ò–¥–µ—è —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –µ–¥–∏–Ω–æ–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ª—é–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

<br>

## –í–≤–µ–¥–µ–Ω–∏–µ –≤ Pinia: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è Vue

**Pinia** ([–ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è –∫–∞–∫ /piÀênj å/](https://ru.wikipedia.org/wiki/%D0%9F%D0%B8%D0%BD%D1%8C%D1%8F), –ø–æ—Ö–æ–∂–µ –Ω–∞ "–ø–∏–Ω—å—è" –ø–æ-–∏—Å–ø–∞–Ω—Å–∫–∏) ‚Äî —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è, –ª–µ–≥–∫–∞—è –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ Vue 3. –û–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –∫–∞–∫ –ø—Ä–µ–µ–º–Ω–∏–∫ Vuex –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π API.

**–ü–æ—á–µ–º—É Pinia, –∞ –Ω–µ Vuex?**
* **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –í Pinia –Ω–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ "–º—É—Ç–∞—Ü–∏–π" (–æ –Ω–∏—Ö –Ω–∏–∂–µ), —á—Ç–æ –¥–µ–ª–∞–µ—Ç API –ø—Ä–æ—â–µ –∏ –±–ª–∏–∂–µ –∫ –æ–±—ã—á–Ω–æ–º—É –∫–æ–¥—É Vue.
* **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".
* **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (store) ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–º, –≥–¥–µ –æ–Ω –Ω—É–∂–µ–Ω.
* **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å:** Pinia –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∞—è –ø–æ —Ä–∞–∑–º–µ—Ä—É.

<br>

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Pinia

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
    ```bash
    npm install pinia
    # –∏–ª–∏ yarn add pinia
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–≤ `src/main.js`):**
    –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä Pinia –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ–≥–æ –∫ –Ω–∞—à–µ–º—É Vue-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.
    ```javascript
    // src/main.js
    import { createApp } from 'vue'
    import { createPinia } from 'pinia' // 1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º createPinia
    import App from './App.vue'
    import router from './router'

    const app = createApp(App)
    const pinia = createPinia() // 2. –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä Pinia

    app.use(router)
    app.use(pinia) // 3. –ü–æ–¥–∫–ª—é—á–∞–µ–º Pinia –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

    app.mount('#app')
    ```

<br>

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ Pinia

Pinia —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–Ω—Ü–µ–ø—Ü–∏–µ–π **—Ö—Ä–∞–Ω–∏–ª–∏—â (stores)**. –ö–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —á–∞—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã, –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–ª—è UI-–Ω–∞—Å—Ç—Ä–æ–µ–∫).

### 1. –•—Ä–∞–Ω–∏–ª–∏—â–µ (Store)

**–•—Ä–∞–Ω–∏–ª–∏—â–µ** ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç **—Å–æ—Å—Ç–æ—è–Ω–∏–µ**, **–≥–µ—Ç—Ç–µ—Ä—ã** –∏ **–¥–µ–π—Å—Ç–≤–∏—è**. –ï–≥–æ –ø—Ä–∏–Ω—è—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤ –ø–∞–ø–∫–µ `src/stores`.

–î–∞–≤–∞–π —Å–æ–∑–¥–∞–¥–∏–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –Ω–∞—à–µ–π –∫–æ—Ä–∑–∏–Ω—ã.
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/stores/cartStore.js`:
```javascript
// src/stores/cartStore.js
import { defineStore } from 'pinia';

// `defineStore` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:
// 1. –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–∑–¥–µ—Å—å 'cart')
// 2. –û–±—ä–µ–∫—Ç —Å –æ–ø—Ü–∏—è–º–∏: state, getters, actions
export const useCartStore = defineStore('cart', {
  // state, getters, actions –±—É–¥—É—Ç –∑–¥–µ—Å—å
});
```

`useCartStore` ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É.

### 2. –°–æ—Å—Ç–æ—è–Ω–∏–µ (`state`)

**State** ‚Äî —ç—Ç–æ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω–∏—Ç –Ω–∞—à–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –≠—Ç–æ –∞–Ω–∞–ª–æ–≥ `data()` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ. `state` –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏–µ–π, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–π –æ–±—ä–µ–∫—Ç, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

```js
// src/stores/cartStore.js
import { defineStore } from 'pinia';

export const useCartStore = defineStore('cart', {
  state: () => ({
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—à–µ–π –∫–æ—Ä–∑–∏–Ω—ã
    itemIds: [], // –ú–∞—Å—Å–∏–≤ ID –∫–Ω–∏–≥ –≤ –∫–æ—Ä–∑–∏–Ω–µ
    coupon: null, // –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–π –∫—É–ø–æ–Ω
    discountPercentage: 0
  }),
  // ... getters, actions
});
```

### 3. –ì–µ—Ç—Ç–µ—Ä—ã (`getters`)

**Getters** ‚Äî —ç—Ç–æ –∞–Ω–∞–ª–æ–≥ **–≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö —Å–≤–æ–π—Å—Ç–≤ (`computed`)** –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ö–∞–∫ –∏ `computed`, –≥–µ—Ç—Ç–µ—Ä—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

```js
// src/stores/cartStore.js
// ...
export const useCartStore = defineStore('cart', {
  state: () => ({
    itemIds: [],
    // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–∞—Ö
    books: [
      { id: 1, title: '–ö–Ω–∏–≥–∞ 1', price: 100 },
      { id: 2, title: '–ö–Ω–∏–≥–∞ 2', price: 200 },
      { id: 3, title: '–ö–Ω–∏–≥–∞ 3', price: 150 },
    ],
  }),
  getters: {
    // –ì–µ—Ç—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    itemCount() {
      // `this` –∑–¥–µ—Å—å —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (state)
      return this.itemIds.length;
    },
    // –ì–µ—Ç—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–∏–µ –≥–µ—Ç—Ç–µ—Ä—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    detailedItems() {
      return this.itemIds.map(id => this.books.find(b => b.id === id));
    },
    totalPrice() {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥–æ–π –≥–µ—Ç—Ç–µ—Ä `detailedItems`
      return this.detailedItems.reduce((total, item) => total + item.price, 0);
    },
  },
  // ... actions
});
```

### 4. –î–µ–π—Å—Ç–≤–∏—è (`actions`)

**Actions** ‚Äî —ç—Ç–æ –∞–Ω–∞–ª–æ–≥ **–º–µ—Ç–æ–¥–æ–≤ (`methods`)** –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è. –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –≤—ã –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å `state`.

* –î–µ–π—Å—Ç–≤–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ API).
* –í–Ω—É—Ç—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑–º–µ–Ω—è—Ç—å `state`, –æ–±—Ä–∞—â–∞—è—Å—å –∫ –Ω–µ–º—É —á–µ—Ä–µ–∑ `this`.

```js
// src/stores/cartStore.js
// ...
export const useCartStore = defineStore('cart', {
  state: () => ({
    itemIds: [],
    // ...
  }),
  getters: {
    // ...
  },
  actions: {
    // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
    addItem(itemId) {
      if (!this.itemIds.includes(itemId)) {
        this.itemIds.push(itemId);
      }
    },
    // –ï—â–µ –æ–¥–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
    removeItem(itemId) {
      this.itemIds = this.itemIds.filter(id => id !== itemId);
    },
    // –ü—Ä–∏–º–µ—Ä –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
    async applyDiscountCoupon(couponCode) {
      try {
        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—É–ø–æ–Ω–∞
        const response = await fetch(`/api/coupons/${couponCode}`);
        const data = await response.json(); // –ù–∞–ø—Ä–∏–º–µ—Ä, { discount: 15 }
        
        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
        this.discountPercentage = data.discount;
        this.coupon = couponCode;

      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫—É–ø–æ–Ω–∞:', error);
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫—É–ø–æ–Ω!');
      }
    },
  },
});
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

* **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π** —Ñ—É–Ω–∫—Ü–∏—é `use...Store`.
* **–í—ã–∑–æ–≤–∏** –µ–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.
* –ò—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ–π—Å—Ç–≤–∞ `state` –∏ `getters` (–ª—É—á—à–µ –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑ `computed` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å) –∏ –≤—ã–∑—ã–≤–∞–π `actions` (–∏–∑ `methods` –∏–ª–∏ `setup`).

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å Options API:

```html
<template>
  <div>
    <p>–¢–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ: {{ cartItemCount }}</p>
    <p>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: {{ cartTotalPrice }} —Ä—É–±.</p>
    <ul>
      <li v-for="book in books" :key="book.id">
        {{ book.title }}
        <button @click="addToCart(book.id)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
      </li>
    </ul>
  </div>
</template>

<script>
import { useCartStore } from '../stores/cartStore';

export default {
  // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, –∫–Ω–∏–≥–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∑–¥–µ—Å—å, –Ω–æ –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∫–∞–∫ props
  data() {
    return {
      books: [
        { id: 1, title: '–ö–Ω–∏–≥–∞ 1', price: 100 },
        { id: 2, title: '–ö–Ω–∏–≥–∞ 2', price: 200 },
      ]
    };
  },
  computed: {
    // –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∏ –≥–µ—Ç—Ç–µ—Ä–∞–º –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å,
    // –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.
    cartItemCount() {
      // –í—ã–∑—ã–≤–∞–µ–º useCartStore() –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É
      return useCartStore().itemCount;
    },
    cartTotalPrice() {
      return useCartStore().totalPrice;
    }
    // –î–ª—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mapState, mapGetters –∏–∑ Pinia,
    // –Ω–æ –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–± —Å–∞–º—ã–π –ø–æ–Ω—è—Ç–Ω—ã–π.
  },
  methods: {
    addToCart(bookId) {
      // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É, —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
      const cartStore = useCartStore();
      cartStore.addItem(bookId);
    }
  }
}
</script>
```

### Pinia vs Vuex: –ß—Ç–æ –Ω–∞—Å—á–µ—Ç –ú—É—Ç–∞—Ü–∏–π?

–ï—Å–ª–∏ —Ç—ã —Å—Ç–æ–ª–∫–Ω–µ—à—å—Å—è —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –Ω–∞ Vue 2 –∏–ª–∏ —Ä–∞–Ω–Ω–∏–º–∏ –Ω–∞ Vue 3, —Ç—ã —É–≤–∏–¥–∏—à—å **Vuex**. –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –∑–∞–º–µ—Ç–∏—à—å:

* –í **Vuex** —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ **–º—É—Ç–∞—Ü–∏–∏ (`mutations`)**. –ú—É—Ç–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ò–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (`actions`) –Ω—É–∂–Ω–æ –±—ã–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å `commit` –¥–ª—è –º—É—Ç–∞—Ü–∏–∏, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
* –í **Pinia** —ç—Ç–æ–π –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –Ω–µ—Ç. –¢—ã –ø—Ä–æ—Å—Ç–æ **–Ω–∞–ø—Ä—è–º—É—é –∏–∑–º–µ–Ω—è–µ—à—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ** (`this.items.push(...)`) –≤–Ω—É—Ç—Ä–∏ `actions`. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ø—Ä–æ—â–µ –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–µ–µ.

<br>

## ‚ú® –ò—Ç–æ–≥

* **Pinia** ‚Äî —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** –≤ Vue 3.
* –û–Ω–∞ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`prop drilling`, `event bubbling hell`).
* –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:
  * **–•—Ä–∞–Ω–∏–ª–∏—â–µ (`store`)**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.
  * **–°–æ—Å—Ç–æ—è–Ω–∏–µ (`state`)**: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
  * **–ì–µ—Ç—Ç–µ—Ä—ã (`getters`)**: "–í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞" –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–∫—ç—à–∏—Ä—É—é—Ç—Å—è).
  * **–î–µ–π—Å—Ç–≤–∏—è (`actions`)**: "–ú–µ—Ç–æ–¥—ã" –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (–º–æ–≥—É—Ç –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏).
* Pinia –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Vuex, —É–±–∏—Ä–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –º—É—Ç–∞—Ü–∏—è—Ö.

<br>

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

* **Pinia - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã):** https://pinia.vuejs.org/getting-started.html
* **Pinia - –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:** https://pinia.vuejs.org/core-concepts/

> –í –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏ –º—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –Ω–∞—à–µ–π –∫–æ—Ä–∑–∏–Ω—ã –∏–∑ `App.vue` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Pinia!
> 
---


<div align=center style="display:flex;justify-content:center;"> 

**[‚¨ÖÔ∏è –ù–∞–∑–∞–¥](../10-vue-router-dynamic/TASK.md) | [–í–ø–µ—Ä–µ–¥ ‚û°Ô∏è](./PRACTICE.md)** 

</div>